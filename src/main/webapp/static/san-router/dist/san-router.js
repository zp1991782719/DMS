!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("san-router",[],e):"object"==typeof exports?exports["san-router"]=e():t["san-router"]=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist",e(e.s=6)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var r=(0,s.default)(t),n=(0,s.default)(e),o=r.path;if(0===o.indexOf("/"))return t;var i=o.split("/"),a=n.path.split("/");a.pop();for(var u=0;u<i.length;u++){var c=i[u];switch(c){case"..":a.pop();break;case".":break;default:a.push(c)}}return""!==a[0]&&a.unshift(""),a.join("/")+(r.queryString?"?"+r.queryString:"")}e.__esModule=!0,e.default=o;var i=r(1),s=n(i)},function(t,e,r){"use strict";function n(t){var e={hash:"",queryString:"",params:{},query:{},path:t},r=e.path.indexOf("#");r>=0&&(e.hash=e.path.slice(r+1),e.path=e.path.slice(0,r));var n=e.query,o=e.path.indexOf("?");return o>=0&&(e.queryString=e.path.slice(o+1),e.path=e.path.slice(0,o),e.queryString.split("&").forEach(function(t){var e=t.indexOf("="),r="";e>0&&(r=t.slice(e+1),t=t.slice(0,e));var o=decodeURIComponent(t);r=decodeURIComponent(r),n.hasOwnProperty(o)?n[o]=[].concat(n[o],r):n[o]=r})),e}e.__esModule=!0,e.default=n},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(){n(this,t)}return t.prototype.on=function(t,e){"function"==typeof e&&(this._eventListeners||(this._eventListeners={}),this._eventListeners[t]||(this._eventListeners[t]=[]),this._eventListeners[t].push(e))},t.prototype.un=function(t,e){if(this._eventListeners&&this._eventListeners[t])if(e)for(var r=this._eventListeners[t],n=r.length;n--;)r[n]===e&&r.splice(n,1);else this._eventListeners[t]=[]},t.prototype.fire=function(t,e){if(!t)throw new Error("No event type specified");var r=this._eventListeners&&this._eventListeners[t];if(r)for(var n=0;n<r.length;n++)r[n](e)},t}();e.default=o},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=r(6),i=r(0),s=n(i);e.default={template:'<a href="{{href}}"\n        onclick="return false;"\n        on-click="clicker($event)"\n        target="{{target}}"\n        class="{{class}}"\n        style="{{style}}"\n        >\n        <slot></slot>\n    </a>',clicker:function(t){var e=this.data.get("href");"string"==typeof e&&o.router.locator.redirect(e.replace(/^#/,"")),t.preventDefault?t.preventDefault():t.returnValue=!1},computed:{href:function t(){var e=this.data.get("to");if("string"==typeof e){var t=(0,s.default)(e,o.router.locator.current);return"hash"===o.router.mode&&(t="#"+t),t}}}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(){var t=location.href.indexOf("#"),e=t<0?"/":location.href.slice(t+1)||"/";return e}e.__esModule=!0;var u=r(2),c=n(u),f=r(0),l=n(f),h=function(t){function e(){o(this,e);var r=i(this,t.call(this));return r.current=a(),r.referrer="",r.hashChangeHandler=function(){r.redirect(a())},r}return s(e,t),e.prototype.start=function(){window.addEventListener&&window.addEventListener("hashchange",this.hashChangeHandler,!1),window.attachEvent&&window.attachEvent("onhashchange",this.hashChangeHandler)},e.prototype.stop=function(){window.removeEventListener&&window.removeEventListener("hashchange",this.hashChangeHandler,!1),window.detachEvent&&window.detachEvent("onhashchange",this.hashChangeHandler)},e.prototype.redirect=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{force:!1};t=(0,l.default)(t,this.current);var r=this.current,n=t!==r;n?(this.referrer=r,this.current=t,location.hash=t):r=this.referrer,!n&&!e.force||e.silent||this.fire("redirect",{url:t,referrer:r})},e.prototype.reload=function(){this.redirect(this.current,{force:!0})},e}(c.default);e.default=h},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(){return location.pathname+location.search}e.__esModule=!0;var u=r(2),c=n(u),f=r(0),l=n(f),h=function(t){function e(){o(this,e);var r=i(this,t.call(this));return r.current=a(),r.referrer="",r.popstateHandler=function(){r.referrer=r.current,r.current=a(),r.fire("redirect",{url:r.current,referrer:r.referrer})},r}return s(e,t),e.prototype.start=function(){window.addEventListener("popstate",this.popstateHandler)},e.prototype.stop=function(){window.removeEventListener("popstate",this.popstateHandler)},e.prototype.redirect=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{force:!1};t=(0,l.default)(t,this.current);var r=this.current,n=t!==r;n&&(this.referrer=r,this.current=t,history.pushState({},"",t)),!n&&!e.force||e.silent||this.fire("redirect",{url:t,referrer:r})},e.prototype.reload=function(){this.fire("redirect",{url:this.current,referrer:this.referrer})},e}(c.default);e.default=h,h.isSupport="pushState"in window.history},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return t.prototype&&(5===t.prototype.nodeType||"san-cmpt"===t.prototype._type)}e.__esModule=!0,e.Link=e.router=e.Router=e.version=void 0;var s=r(4),a=n(s),u=r(5),c=n(u),f=r(1),l=n(f),h=r(3),p=n(h),d=r(7),v=n(d),y=365611,g=function(){return(++y).toString()},w=(e.version="1.2.0",e.Router=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.mode,i=void 0===n?"hash":n;o(this,t),this.routes=[],this.routeAlives=[],this.listeners=[],this.locatorRedirectHandler=function(t){function r(){d=1,p++,y()}for(var n=(0,l.default)(t.url),o=void 0,i=0;i<e.routes.length;i++){var s=e.routes[i],a=s.rule.exec(n.path);if(a){o=s;for(var u=s.keys||[],c=1;c<a.length;c++){var f=u[c]||c,h=a[c];n.query[f]=h,n.params[f]=h}n.referrer=t.referrer,n.config=s.config;break}}var p=0,d=1,v={hash:n.hash,queryString:n.queryString,query:n.query,path:n.path,referrer:n.referrer,config:n.config,resume:r,suspend:function(){d=0},stop:function(){d=-1}},y=function(){d>0&&(p<e.listeners.length?(e.listeners[p].call(e,v,n.config),d>0&&r()):g())},g=function(){if(o)e.doRoute(o,n);else for(var t=e.routeAlives.length;t--;)e.routeAlives[t].component.dispose(),e.routeAlives.splice(t,1)};y()},this.setMode(i)}return t.prototype.listen=function(t){this.listeners.push(t)},t.prototype.unlisten=function(t){for(var e=this.listeners.length;e--;)this.listeners[e]===t&&this.listeners.splice(e,1)},t.prototype.doRoute=function(t,e){for(var r=this,n=!1,o=this.routeAlives.length;o--;){var s=this.routeAlives[o];s.id===t.id?(s.component.data.set("route",e),s.component._callHook("route"),n=!0):(s.component.dispose(),this.routeAlives.splice(o,1))}n||(t.Component?i(t.Component)?this.attachCmpt(t,e):t.Component().then(function(n){i(n)?t.Component=n:n.__esModule&&i(n.default)&&(t.Component=n.default),r.attachCmpt(t,e)}):t.handler.call(this,e))},t.prototype.attachCmpt=function(t,e){var r=new t.Component;r.data.set("route",e),r._callHook("route");var n=t.target,o=(0,v.default)(n);if(!o)throw new Error('[SAN-ROUTER ERROR] Attach failed, target element "'+t.target+'" is not found.');r.attach(o),this.routeAlives.push({component:r,id:t.id})},t.prototype.add=function(t){var e=t.rule,r=t.handler,n=t.target,o=void 0===n?"#main":n,i=t.Component,s=[""];if("string"==typeof e){var a=e.replace(/\/:([a-z0-9_-]+)(?=\/|$)/gi,function(t,e){return s.push(e),"/([^/\\s]+)"});e=new RegExp("^"+a+"$","i")}if(!(e instanceof RegExp))throw new Error("[SAN-ROUTER ERROR] Rule must be string or RegExp!");var u=g();return this.routes.push({id:u,rule:e,handler:r,keys:s,target:o,Component:i,config:t}),this},t.prototype.start=function(){return this.isStarted||(this.isStarted=!0,this.locator.on("redirect",this.locatorRedirectHandler),this.locator.start(),this.locator.reload()),this},t.prototype.stop=function(){return this.locator.un("redirect",this.locatorRedirectHandler),this.locator.stop(),this.isStarted=!1,this},t.prototype.setMode=function(t){if(t=t.toLowerCase(),this.mode!==t){this.mode=t;var e=!1;switch(this.isStarted&&(this.stop(),e=!0),t){case"hash":this.locator=new a.default;break;case"html5":this.locator=new c.default}return e&&this.start(),this}},t}());e.router=new w;e.Link=p.default},function(t,e,r){"use strict";function n(t){switch("undefined"==typeof t?"undefined":o(t)){case"object":return t;case"string":return document.querySelector?document.querySelector(t):document.getElementById(t.replace(/#/i,""))}}e.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=n}])});